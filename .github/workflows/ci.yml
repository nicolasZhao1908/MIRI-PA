name: CI  
on:
  push:

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v4
        - name: Format all sv files
          uses: chipsalliance/verible-formatter-action@main
          with:
            files:
              ./rtl/**/*.{v,vh,sv,svh}
              ./tb/**/*.{v,vh,sv,svh}
            github_token: ${{ secrets.GITHUB_TOKEN }}
        - name: Lint all sv files
          uses: chipsalliance/verible-linter-action@main
          with:
            config_file: 'utils/verible-lint.rules'
            paths: |
                ./rtl
                ./tb
            extensions: |
                .sv
                .v
                .vh
                .svh
            github_token: ${{ secrets.GITHUB_TOKEN }}